---
title:  "2021.01.04 Lecture(1)"
excerpt: "자율주행 자동차 소개"
toc: true
toc_sticky: true

categories:
    - 자율주행스쿨강의
tags:
    - Lecture
    - ROS
    - 자율주행자동차

last_modified_at: 2021-01-04T08:06:00-05:00
---

# Week_06_Day_01. 자율주행자동차 소개

## 자율주행 자동차 분류
- 미국자동차학회(SAE) 기준으로 분류된 단계
1. Level-0 - **비자동화**
    - 자율주행 시스템 없음
    - 운전자가 차량을 완전히 제어해야 하는 단계
2. Level-1 - **운전자 보조**
    - 방향, 속도 제어 등 특정 기능의 자동화
    - 운전자는 차의 속도와 방향을 항상 통제
3. Level-2 - **부분 자동화**
    - 고속도로와 같이 정해진 조건에서 차선과 간격 유지 가능
    - 운전자는 항상 주변상황 주시하고 적극적으로 주행에 개입
4. Level-3 - **조건부 자동화**
    - 정해진 조건에서 자율주행 가능
    - 운전자는 적극적으로 주행에 개입할 필요는 없지만, 자율주행 한계 조건에 도달하면 정해진 시간 내에 대응해야 함
5. Level-4 - **고도 자동화**
    - 정해진 도로 조건의 모든 상황에서 자율주행 가능
    - 그 밖의 도로 조건에서는 운전자가 주행에 개입
6. Level-5 - **완전 자동화**
    - 모든 주행 상황에서 운전자의 개입 불필요
    - *운전자 없이 주행 가능*


## 자율주행 3단계 프로세스
1. 인지
    - 경로탐색, V2X, 센서퓨전
    - 고정지물 인식 및 경로탐색, 변동지물 및 이동물체 인식
2. 판단
    - 주변상황 판단 및 주행전략 결정
    - 주행경로 생성
3. 제어
    - 차량 제어(엔진 가감속, 조향)

## 자율주행 소프트웨어가 운전하는 방식
- 정확한 지도 필요
- 지도에서 자기의 현재 위치 알아내기 - GPS, 영상 매칭, 라이다 매칭
- 목적지까지 경로 찾기
- 주변 살피기 - 각종 센서
- 상황에 맞게 속도, 조향 조절

## 고정밀 지도
- HD map(High Definition Map)
- 기존 네비게이션 보다 정밀한 지도
    - 10 ~ 20 cm 정밀도 제공
    *- 실시간 의사결정 능력을 위해서 매우 정밀한 지도가 필요*
- 다양한 부가정보 포함
    - 차선 정보
    - 가드레일
    - 도로 곡률, 경사
    - 신호등 위치
    - 교통 표식

- 벡터맵
    - [NVIDIA 벡터맵](https://www.youtube.com/watch?v=5lydCAYb5N0)
- 포인트맵 - 3차원 지도
    - [HERE 벡터맵](https://www.youtube.com/watch?v=8dyo-S3Vxlw)
    - 라이다를 통해 수집된 데이터를 3차원 지도로 만든 것

- MMS(Mobile Mapping System)을 통해 고정밀지도 제작
    - 라이다, 카메라, GPS(GNSS/INS), 조도 센서 등을 통해 데이터 수집
    - 수집한 데이터를 후처리 작업을 통해 지도 제작


## Localization 기술
- **정밀지도**와 연동 및 **라이다/카메라 등의 센서**를 통해 차량의 지도상의 현재 위치 파악
- 주변 표지판 또는 지형지물(랜드마크)과 비교하고 오차를 보정하여 파악하는 기술

## Global Path Planning(Route Planning)
- 목적지까지의 경로 찾기
- 교차로에서 어떻게 주행할 것인지도 결정

## Object Detection
- 주변 차량, 보행자, 오토바이, 자전거, 신호등(*신호등은 보통 지도에서 위치가 결정되어 있음*) 등을 인식
- Deep Learning, 영상처리 기법을 이용하여 검출

## Object Tracking
- 검출된 각 Object에 고유 ID를 부여하여, 추적 및 예상되는 주행경로 예측

## Local Path Planning(Trajectory Planning)
- 다음 이동할 곳으로의 경로 찾기(**충돌 회피 고려**)
    - 여러 개의 후보 경로를 확보(돌발 상황에 대비해야 되기 때문)
    - 실시간 상황을 고려하여, 후보를 계속해서 갱신하는 작업을 반복 => 시스템 최적화 필요

## Behavior Selector - 판단
- 운전을 어떻게 할지 **운전 의사 결정**
- 운전 방법, 성향 등도 결정할 수 있음

## Local Path Following(Trajectory Following) - 제어
- 경로 따라 차량을 운전
- ex) Pure pursuit 알고리즘
    - 차량의 현재 위치를 결정
    - 차량에서 가장 가까운 경로상의 지점을 찾는다.
    - 목표 지점을 찾는다.
    - 곡률을 계산하고 해당 곡률로 차량의 방향을 업데이트 해준다.
    - 차량의 위치를 업데이트 한다.
- 계산된 경로를 잘 따라갈 수 있도록 운전을 제어하는 기술(조향과 속도 조절)
  
## Vehicle Control
- 주행 제어
- 차량 운동학, 관성, 마찰, 미끄러짐 등을 계산하여 차량의 주행을 제어하는 최종 단계
- 여러가지 요소를 고려해야하므로 굉장히 복잡함

![자율주행 프로세스](img/figure_01.png)